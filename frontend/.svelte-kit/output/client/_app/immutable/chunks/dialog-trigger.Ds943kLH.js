import{_ as qe,V as st,N as ut,s as Ge,m as he,u as me,o as ye,p as we,k as We,G as Oe,i as Xe,f as ve,K as Ne,B as be,L as ct,x as lt,e as dt,c as ft,b as vt,C as Fe,D as bt,q as ke,v as pt}from"./scheduler.C5Rd-ZIZ.js";import{S as Ye,i as Ze,t as z,b as H,g as gt,e as ht}from"./index.GzWkxjRN.js";import{r as Se,w as pe,d as ze}from"./index.NQB3_1Bs.js";import{g as mt}from"./utils.CJpQ-IPa.js";import{n as D,p as yt,f as re,q as Te,e as Y,h as L,o as wt,w as Tt,m as B,a as $,r as Ce,u as Pe,j as U,t as Et,c as Ot,k as ee,i as Nt}from"./create.CWXb-gbW.js";import{t as De,o as Ft,r as kt,g as St}from"./updater.C5YpvhWQ.js";import{g as Ct,a as Pt,u as Dt}from"./portal.ZBoujvSR.js";import{l as _t}from"./array.Da8vNzNy.js";import{c as At,b as It}from"./events.D-BaW_4L.js";function He(n){return new Promise(e=>setTimeout(e,n))}const Je=()=>typeof window<"u";function Rt(){const n=navigator.userAgentData;return(n==null?void 0:n.platform)??navigator.platform}const Qe=n=>Je()&&n.test(Rt().toLowerCase()),Lt=()=>Je()&&!!navigator.maxTouchPoints,Bt=()=>Qe(/^mac/)&&!Lt(),Mt=()=>Qe(/mac|iphone|ipad|ipod/i),xt=()=>Mt()&&!Bt(),de="data-melt-scroll-lock";function _e(n,e){if(!n)return;const t=n.style.cssText;return Object.assign(n.style,e),()=>{n.style.cssText=t}}function Kt(n,e,t){if(!n)return;const r=n.style.getPropertyValue(e);return n.style.setProperty(e,t),()=>{r?n.style.setProperty(e,r):n.style.removeProperty(e)}}function jt(n){const e=n.getBoundingClientRect().left;return Math.round(e)+n.scrollLeft?"paddingLeft":"paddingRight"}function Ut(n){const e=n??document,t=e.defaultView??window,{documentElement:r,body:i}=e;if(i.hasAttribute(de))return D;i.setAttribute(de,"");const a=t.innerWidth-r.clientWidth,v=()=>Kt(r,"--scrollbar-width",`${a}px`),c=jt(r),l=t.getComputedStyle(i)[c],b=()=>_e(i,{overflow:"hidden",[c]:`calc(${l} + ${a}px)`}),g=()=>{const{scrollX:O,scrollY:y,visualViewport:T}=t,h=(T==null?void 0:T.offsetLeft)??0,k=(T==null?void 0:T.offsetTop)??0,S=_e(i,{position:"fixed",overflow:"hidden",top:`${-(y-Math.floor(k))}px`,left:`${-(O-Math.floor(h))}px`,right:"0",[c]:`calc(${l} + ${a}px)`});return()=>{S==null||S(),t.scrollTo(O,y)}},w=[v(),xt()?g():b()];return()=>{w.forEach(O=>O==null?void 0:O()),i.removeAttribute(de)}}async function Ae(n){const{prop:e,defaultEl:t}=n;if(await Promise.all([He(1),qe]),e===void 0){t==null||t.focus();return}const r=yt(e)?e(t):e;if(typeof r=="string"){const i=document.querySelector(r);if(!re(i))return;i.focus()}else re(r)&&r.focus()}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var $e=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],ae=$e.join(","),et=typeof Element>"u",K=et?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ie=!et&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n==null?void 0:n.ownerDocument},oe=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),u=i===""||i==="true",a=u||t&&e&&n(e.parentNode);return a},Vt=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},tt=function(e,t,r){if(oe(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(ae));return t&&K.call(e,ae)&&i.unshift(e),i=i.filter(r),i},nt=function n(e,t,r){for(var i=[],u=Array.from(e);u.length;){var a=u.shift();if(!oe(a,!1))if(a.tagName==="SLOT"){var v=a.assignedElements(),c=v.length?v:a.children,l=n(c,!0,r);r.flatten?i.push.apply(i,l):i.push({scopeParent:a,candidates:l})}else{var b=K.call(a,ae);b&&r.filter(a)&&(t||!e.includes(a))&&i.push(a);var g=a.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(a),w=!oe(g,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(a));if(g&&w){var O=n(g===!0?a.children:g.children,!0,r);r.flatten?i.push.apply(i,O):i.push({scopeParent:a,candidates:O})}else u.unshift.apply(u,a.children)}}return i},rt=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},x=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Vt(e))&&!rt(e)?0:e.tabIndex},qt=function(e,t){var r=x(e);return r<0&&t&&!rt(e)?0:r},Gt=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},at=function(e){return e.tagName==="INPUT"},Wt=function(e){return at(e)&&e.type==="hidden"},Xt=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},Yt=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},Zt=function(e){if(!e.name)return!0;var t=e.form||ie(e),r=function(v){return t.querySelectorAll('input[type="radio"][name="'+v+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var u=Yt(i,e.form);return!u||u===e},zt=function(e){return at(e)&&e.type==="radio"},Ht=function(e){return zt(e)&&!Zt(e)},Jt=function(e){var t,r=e&&ie(e),i=(t=r)===null||t===void 0?void 0:t.host,u=!1;if(r&&r!==e){var a,v,c;for(u=!!((a=i)!==null&&a!==void 0&&(v=a.ownerDocument)!==null&&v!==void 0&&v.contains(i)||e!=null&&(c=e.ownerDocument)!==null&&c!==void 0&&c.contains(e));!u&&i;){var l,b,g;r=ie(i),i=(l=r)===null||l===void 0?void 0:l.host,u=!!((b=i)!==null&&b!==void 0&&(g=b.ownerDocument)!==null&&g!==void 0&&g.contains(i))}}return u},Ie=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},Qt=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var u=K.call(e,"details>summary:first-of-type"),a=u?e.parentElement:e;if(K.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var v=e;e;){var c=e.parentElement,l=ie(e);if(c&&!c.shadowRoot&&i(c)===!0)return Ie(e);e.assignedSlot?e=e.assignedSlot:!c&&l!==e.ownerDocument?e=l.host:e=c}e=v}if(Jt(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ie(e);return!1},$t=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return K.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},se=function(e,t){return!(t.disabled||oe(t)||Wt(t)||Qt(t,e)||Xt(t)||$t(t))},ge=function(e,t){return!(Ht(t)||x(t)<0||!se(e,t))},en=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},tn=function n(e){var t=[],r=[];return e.forEach(function(i,u){var a=!!i.scopeParent,v=a?i.scopeParent:i,c=qt(v,a),l=a?n(i.candidates):v;c===0?a?t.push.apply(t,l):t.push(v):r.push({documentOrder:u,tabIndex:c,item:i,isScope:a,content:l})}),r.sort(Gt).reduce(function(i,u){return u.isScope?i.push.apply(i,u.content):i.push(u.content),i},[]).concat(t)},nn=function(e,t){t=t||{};var r;return t.getShadowRoot?r=nt([e],t.includeContainer,{filter:ge.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:en}):r=tt(e,t.includeContainer,ge.bind(null,t)),tn(r)},rn=function(e,t){t=t||{};var r;return t.getShadowRoot?r=nt([e],t.includeContainer,{filter:se.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=tt(e,t.includeContainer,se.bind(null,t)),r},V=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return K.call(e,ae)===!1?!1:ge(t,e)},an=$e.concat("iframe").join(","),fe=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return K.call(e,an)===!1?!1:se(t,e)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Re(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function Le(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Re(Object(t),!0).forEach(function(r){on(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Re(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function on(n,e,t){return e=un(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sn(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function un(n){var e=sn(n,"string");return typeof e=="symbol"?e:String(e)}var Be={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r.pause()}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&e[e.length-1].unpause()}},cn=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},ln=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},Z=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},dn=function(e){return Z(e)&&!e.shiftKey},fn=function(e){return Z(e)&&e.shiftKey},Me=function(e){return setTimeout(e,0)},xe=function(e,t){var r=-1;return e.every(function(i,u){return t(i)?(r=u,!1):!0}),r},X=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},te=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},vn=[],bn=function(e,t){var r=(t==null?void 0:t.document)||document,i=(t==null?void 0:t.trapStack)||vn,u=Le({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:dn,isKeyBackward:fn},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},v,c=function(s,o,f){return s&&s[o]!==void 0?s[o]:u[f||o]},l=function(s,o){var f=typeof(o==null?void 0:o.composedPath)=="function"?o.composedPath():void 0;return a.containerGroups.findIndex(function(m){var E=m.container,N=m.tabbableNodes;return E.contains(s)||(f==null?void 0:f.includes(E))||N.find(function(F){return F===s})})},b=function(s){var o=u[s];if(typeof o=="function"){for(var f=arguments.length,m=new Array(f>1?f-1:0),E=1;E<f;E++)m[E-1]=arguments[E];o=o.apply(void 0,m)}if(o===!0&&(o=void 0),!o){if(o===void 0||o===!1)return o;throw new Error("`".concat(s,"` was specified but was not a node, or did not return a node"))}var N=o;if(typeof o=="string"&&(N=r.querySelector(o),!N))throw new Error("`".concat(s,"` as selector refers to no known node"));return N},g=function(){var s=b("initialFocus");if(s===!1)return!1;if(s===void 0||!fe(s,u.tabbableOptions))if(l(r.activeElement)>=0)s=r.activeElement;else{var o=a.tabbableGroups[0],f=o&&o.firstTabbableNode;s=f||b("fallbackFocus")}if(!s)throw new Error("Your focus-trap needs to have at least one focusable element");return s},w=function(){if(a.containerGroups=a.containers.map(function(s){var o=nn(s,u.tabbableOptions),f=rn(s,u.tabbableOptions),m=o.length>0?o[0]:void 0,E=o.length>0?o[o.length-1]:void 0,N=f.find(function(P){return V(P)}),F=f.slice().reverse().find(function(P){return V(P)}),C=!!o.find(function(P){return x(P)>0});return{container:s,tabbableNodes:o,focusableNodes:f,posTabIndexesFound:C,firstTabbableNode:m,lastTabbableNode:E,firstDomTabbableNode:N,lastDomTabbableNode:F,nextTabbableNode:function(R){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,A=o.indexOf(R);return A<0?G?f.slice(f.indexOf(R)+1).find(function(W){return V(W)}):f.slice(0,f.indexOf(R)).reverse().find(function(W){return V(W)}):o[A+(G?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(s){return s.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!b("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(s){return s.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},O=function d(s){var o=s.activeElement;if(o)return o.shadowRoot&&o.shadowRoot.activeElement!==null?d(o.shadowRoot):o},y=function d(s){if(s!==!1&&s!==O(document)){if(!s||!s.focus){d(g());return}s.focus({preventScroll:!!u.preventScroll}),a.mostRecentlyFocusedNode=s,cn(s)&&s.select()}},T=function(s){var o=b("setReturnFocus",s);return o||(o===!1?!1:s)},h=function(s){var o=s.target,f=s.event,m=s.isBackward,E=m===void 0?!1:m;o=o||te(f),w();var N=null;if(a.tabbableGroups.length>0){var F=l(o,f),C=F>=0?a.containerGroups[F]:void 0;if(F<0)E?N=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:N=a.tabbableGroups[0].firstTabbableNode;else if(E){var P=xe(a.tabbableGroups,function(ce){var le=ce.firstTabbableNode;return o===le});if(P<0&&(C.container===o||fe(o,u.tabbableOptions)&&!V(o,u.tabbableOptions)&&!C.nextTabbableNode(o,!1))&&(P=F),P>=0){var R=P===0?a.tabbableGroups.length-1:P-1,G=a.tabbableGroups[R];N=x(o)>=0?G.lastTabbableNode:G.lastDomTabbableNode}else Z(f)||(N=C.nextTabbableNode(o,!1))}else{var A=xe(a.tabbableGroups,function(ce){var le=ce.lastTabbableNode;return o===le});if(A<0&&(C.container===o||fe(o,u.tabbableOptions)&&!V(o,u.tabbableOptions)&&!C.nextTabbableNode(o))&&(A=F),A>=0){var W=A===a.tabbableGroups.length-1?0:A+1,Ee=a.tabbableGroups[W];N=x(o)>=0?Ee.firstTabbableNode:Ee.firstDomTabbableNode}else Z(f)||(N=C.nextTabbableNode(o))}}else N=b("fallbackFocus");return N},k=function(s){var o=te(s);if(!(l(o,s)>=0)){if(X(u.clickOutsideDeactivates,s)){v.deactivate({returnFocus:u.returnFocusOnDeactivate});return}X(u.allowOutsideClick,s)||s.preventDefault()}},S=function(s){var o=te(s),f=l(o,s)>=0;if(f||o instanceof Document)f&&(a.mostRecentlyFocusedNode=o);else{s.stopImmediatePropagation();var m,E=!0;if(a.mostRecentlyFocusedNode)if(x(a.mostRecentlyFocusedNode)>0){var N=l(a.mostRecentlyFocusedNode),F=a.containerGroups[N].tabbableNodes;if(F.length>0){var C=F.findIndex(function(P){return P===a.mostRecentlyFocusedNode});C>=0&&(u.isKeyForward(a.recentNavEvent)?C+1<F.length&&(m=F[C+1],E=!1):C-1>=0&&(m=F[C-1],E=!1))}}else a.containerGroups.some(function(P){return P.tabbableNodes.some(function(R){return x(R)>0})})||(E=!1);else E=!1;E&&(m=h({target:a.mostRecentlyFocusedNode,isBackward:u.isKeyBackward(a.recentNavEvent)})),y(m||a.mostRecentlyFocusedNode||g())}a.recentNavEvent=void 0},p=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=s;var f=h({event:s,isBackward:o});f&&(Z(s)&&s.preventDefault(),y(f))},_=function(s){if(ln(s)&&X(u.escapeDeactivates,s)!==!1){s.preventDefault(),v.deactivate();return}(u.isKeyForward(s)||u.isKeyBackward(s))&&p(s,u.isKeyBackward(s))},j=function(s){var o=te(s);l(o,s)>=0||X(u.clickOutsideDeactivates,s)||X(u.allowOutsideClick,s)||(s.preventDefault(),s.stopImmediatePropagation())},J=function(){if(a.active)return Be.activateTrap(i,v),a.delayInitialFocusTimer=u.delayInitialFocus?Me(function(){y(g())}):y(g()),r.addEventListener("focusin",S,!0),r.addEventListener("mousedown",k,{capture:!0,passive:!1}),r.addEventListener("touchstart",k,{capture:!0,passive:!1}),r.addEventListener("click",j,{capture:!0,passive:!1}),r.addEventListener("keydown",_,{capture:!0,passive:!1}),v},Q=function(){if(a.active)return r.removeEventListener("focusin",S,!0),r.removeEventListener("mousedown",k,!0),r.removeEventListener("touchstart",k,!0),r.removeEventListener("click",j,!0),r.removeEventListener("keydown",_,!0),v},ue=function(s){var o=s.some(function(f){var m=Array.from(f.removedNodes);return m.some(function(E){return E===a.mostRecentlyFocusedNode})});o&&y(g())},q=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(ue):void 0,I=function(){q&&(q.disconnect(),a.active&&!a.paused&&a.containers.map(function(s){q.observe(s,{subtree:!0,childList:!0})}))};return v={get active(){return a.active},get paused(){return a.paused},activate:function(s){if(a.active)return this;var o=c(s,"onActivate"),f=c(s,"onPostActivate"),m=c(s,"checkCanFocusTrap");m||w(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=r.activeElement,o==null||o();var E=function(){m&&w(),J(),I(),f==null||f()};return m?(m(a.containers.concat()).then(E,E),this):(E(),this)},deactivate:function(s){if(!a.active)return this;var o=Le({onDeactivate:u.onDeactivate,onPostDeactivate:u.onPostDeactivate,checkCanReturnFocus:u.checkCanReturnFocus},s);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,Q(),a.active=!1,a.paused=!1,I(),Be.deactivateTrap(i,v);var f=c(o,"onDeactivate"),m=c(o,"onPostDeactivate"),E=c(o,"checkCanReturnFocus"),N=c(o,"returnFocus","returnFocusOnDeactivate");f==null||f();var F=function(){Me(function(){N&&y(T(a.nodeFocusedBeforeActivation)),m==null||m()})};return N&&E?(E(T(a.nodeFocusedBeforeActivation)).then(F,F),this):(F(),this)},pause:function(s){if(a.paused||!a.active)return this;var o=c(s,"onPause"),f=c(s,"onPostPause");return a.paused=!0,o==null||o(),Q(),I(),f==null||f(),this},unpause:function(s){if(!a.paused||!a.active)return this;var o=c(s,"onUnpause"),f=c(s,"onPostUnpause");return a.paused=!1,o==null||o(),w(),J(),I(),f==null||f(),this},updateContainerElements:function(s){var o=[].concat(s).filter(Boolean);return a.containers=o.map(function(f){return typeof f=="string"?r.querySelector(f):f}),a.active&&w(),I(),this}},v.updateContainerElements(e),v};function pn(n={}){let e;const{immediate:t,...r}=n,i=pe(!1),u=pe(!1),a=g=>e==null?void 0:e.activate(g),v=g=>{e==null||e.deactivate(g)},c=()=>{e&&(e.pause(),u.set(!0))},l=()=>{e&&(e.unpause(),u.set(!1))};return{useFocusTrap:g=>(e=bn(g,{...r,onActivate(){var w;i.set(!0),(w=n.onActivate)==null||w.call(n)},onDeactivate(){var w;i.set(!1),(w=n.onDeactivate)==null||w.call(n)}}),t&&a(),{destroy(){v(),e=void 0}}),hasFocus:Se(i),isPaused:Se(u),activate:a,deactivate:v,pause:c,unpause:l}}const ne=[],gn=(n,e)=>{let t=D;function r(){const u=ne.indexOf(n);u>=0&&ne.splice(u,1)}function i(u){t();const{open:a,onClose:v,shouldCloseOnInteractOutside:c,closeOnInteractOutside:l}=u;He(100).then(()=>{a?ne.push(n):r()});function b(){return _t(ne)===n}function g(){b()&&v&&(v(),r())}function w(y){const T=y.target;Te(T)&&T&&b()&&(y.preventDefault(),y.stopPropagation(),y.stopImmediatePropagation())}function O(y){c!=null&&c(y)&&b()&&(y.preventDefault(),y.stopPropagation(),y.stopImmediatePropagation(),g())}t=hn(n,{onInteractOutsideStart:w,onInteractOutside:l?O:void 0,enabled:a}).destroy}return i(e),{update:i,destroy(){r(),t()}}},hn=(n,e)=>{let t=D,r=D,i=!1,u=!1,a=!1;function v(b){t(),r();const{onInteractOutside:g,onInteractOutsideStart:w,enabled:O}=b;if(!O)return;function y(k){g&&Ke(k,n)&&(w==null||w(k));const S=k.target;Te(S)&&it(n,S)&&(u=!0),i=!0}function T(k){g==null||g(k)}const h=mn(n);if(typeof PointerEvent<"u"){const k=S=>{r();const p=_=>{c(_)&&T(_),l()};if(S.pointerType==="touch"){r=L(h,"click",p,{capture:!0,once:!0});return}p(S)};t=Y(L(h,"pointerdown",y,!0),L(h,"pointerup",k,!0))}else{const k=p=>{a?a=!1:c(p)&&T(p),l()},S=p=>{a=!0,c(p)&&T(p),l()};t=Y(L(h,"mousedown",y,!0),L(h,"mouseup",k,!0),L(h,"touchstart",y,!0),L(h,"touchend",S,!0))}}function c(b){return!!(i&&!u&&Ke(b,n))}function l(){i=!1,u=!1}return v(e),{update:v,destroy(){t(),r()}}};function Ke(n,e){if("button"in n&&n.button>0)return!1;const t=n.target;if(!Te(t))return!1;const r=t.ownerDocument;return!r||!r.documentElement.contains(t)?!1:e&&!it(e,t)}function it(n,e){return n===e||n.contains(e)}function mn(n){return(n==null?void 0:n.ownerDocument)??document}const{name:M}=Ot("dialog"),yn={preventScroll:!0,closeOnEscape:!0,closeOnOutsideClick:!0,role:"dialog",defaultOpen:!1,portal:void 0,forceVisible:!1,openFocus:void 0,closeFocus:void 0,onOutsideClick:void 0},wn=["content","title","description"];function Tn(n){const e={...yn,...n},t=De(wt(e,"ids")),{preventScroll:r,closeOnEscape:i,closeOnOutsideClick:u,role:a,portal:v,forceVisible:c,openFocus:l,closeFocus:b,onOutsideClick:g}=t,w=Tt.writable(null),O=De({...Ct(wn),...e.ids}),y=e.open??pe(e.defaultOpen),T=Ft(y,e==null?void 0:e.onOpenChange),h=ze([T,c],([d,s])=>d||s);let k=D;function S(d){const s=d.currentTarget,o=d.currentTarget;!re(s)||!re(o)||(T.set(!0),w.set(o))}function p(){T.set(!1),Ae({prop:b.get(),defaultEl:w.get()})}const _=B(M("trigger"),{stores:[T],returned:([d])=>({"aria-haspopup":"dialog","aria-expanded":d,type:"button"}),action:d=>({destroy:Y($(d,"click",o=>{S(o)}),$(d,"keydown",o=>{o.key!==ee.ENTER&&o.key!==ee.SPACE||(o.preventDefault(),S(o))}))})}),j=B(M("overlay"),{stores:[h,T],returned:([d,s])=>({hidden:d?void 0:!0,tabindex:-1,style:Ce({display:d?void 0:"none"}),"aria-hidden":!0,"data-state":s?"open":"closed"}),action:d=>{let s=D;if(i.get()){const o=Pe(d,{handler:()=>{p()}});o&&o.destroy&&(s=o.destroy)}return{destroy(){s()}}}}),J=B(M("content"),{stores:[h,O.content,O.description,O.title,T],returned:([d,s,o,f,m])=>({id:s,role:a.get(),"aria-describedby":o,"aria-labelledby":f,"aria-modal":d?"true":void 0,"data-state":m?"open":"closed",tabindex:-1,hidden:d?void 0:!0,style:Ce({display:d?void 0:"none"})}),action:d=>{let s=D,o=D;const f=Y(U([T,u,i],([m,E,N])=>{if(!m)return;const F=pn({immediate:!1,escapeDeactivates:N,clickOutsideDeactivates:E,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:d});s=F.activate,o=F.deactivate;const C=F.useFocusTrap(d);return C&&C.destroy?C.destroy:F.deactivate}),U([u,T],([m,E])=>gn(d,{open:E,closeOnInteractOutside:m,onClose(){p()},shouldCloseOnInteractOutside(N){var F;return(F=g.get())==null||F(N),!N.defaultPrevented}}).destroy),U([i],([m])=>m?Pe(d,{handler:p}).destroy:D),U([h],([m])=>{qe().then(()=>{m?s():o()})}));return{destroy:()=>{k(),f()}}}}),Q=B(M("portalled"),{stores:v,returned:d=>({"data-portal":Et(d)}),action:d=>{const s=U([v],([o])=>{if(o===null)return D;const f=Pt(d,o);return f===null?D:Dt(d,f).destroy});return{destroy(){s()}}}}),ue=B(M("title"),{stores:[O.title],returned:([d])=>({id:d})}),q=B(M("description"),{stores:[O.description],returned:([d])=>({id:d})}),I=B(M("close"),{returned:()=>({type:"button"}),action:d=>({destroy:Y($(d,"click",()=>{p()}),$(d,"keydown",o=>{o.key!==ee.SPACE&&o.key!==ee.ENTER||(o.preventDefault(),p())}))})});return U([T,r],([d,s])=>{if(Nt){if(s&&d&&(k=Ut()),d){const o=document.getElementById(O.content.get());Ae({prop:l.get(),defaultEl:o})}return()=>{c.get()||k()}}}),{ids:O,elements:{content:J,trigger:_,title:ue,description:q,overlay:j,close:I,portalled:Q},states:{open:T},options:t}}function ot(){return{NAME:"dialog",PARTS:["close","content","description","overlay","portal","title","trigger"]}}function En(n){const{NAME:e,PARTS:t}=ot(),r=At(e,t),i={...Tn({...kt(n),role:"dialog",forceVisible:!0}),getAttrs:r};return st(e,i),{...i,updateOption:St(i.options)}}function On(){const{NAME:n}=ot();return ut(n)}const Nn=n=>({ids:n&1}),je=n=>({ids:n[0]});function Fn(n){let e;const t=n[12].default,r=he(t,n,n[11],je);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,u){r&&r.m(i,u),e=!0},p(i,[u]){r&&r.p&&(!e||u&2049)&&me(r,t,i,i[11],e?we(t,i[11],u,Nn):ye(i[11]),je)},i(i){e||(z(r,i),e=!0)},o(i){H(r,i),e=!1},d(i){r&&r.d(i)}}}function kn(n,e,t){let r,{$$slots:i={},$$scope:u}=e,{preventScroll:a=void 0}=e,{closeOnEscape:v=void 0}=e,{closeOnOutsideClick:c=void 0}=e,{portal:l=void 0}=e,{open:b=void 0}=e,{onOpenChange:g=void 0}=e,{openFocus:w=void 0}=e,{closeFocus:O=void 0}=e,{onOutsideClick:y=void 0}=e;const{states:{open:T},updateOption:h,ids:k}=En({closeOnEscape:v,preventScroll:a,closeOnOutsideClick:c,portal:l,forceVisible:!0,defaultOpen:b,openFocus:w,closeFocus:O,onOutsideClick:y,onOpenChange:({next:p})=>(b!==p&&(g==null||g(p),t(2,b=p)),p)}),S=ze([k.content,k.description,k.title],([p,_,j])=>({content:p,description:_,title:j}));return We(n,S,p=>t(0,r=p)),n.$$set=p=>{"preventScroll"in p&&t(3,a=p.preventScroll),"closeOnEscape"in p&&t(4,v=p.closeOnEscape),"closeOnOutsideClick"in p&&t(5,c=p.closeOnOutsideClick),"portal"in p&&t(6,l=p.portal),"open"in p&&t(2,b=p.open),"onOpenChange"in p&&t(7,g=p.onOpenChange),"openFocus"in p&&t(8,w=p.openFocus),"closeFocus"in p&&t(9,O=p.closeFocus),"onOutsideClick"in p&&t(10,y=p.onOutsideClick),"$$scope"in p&&t(11,u=p.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&b!==void 0&&T.set(b),n.$$.dirty&8&&h("preventScroll",a),n.$$.dirty&16&&h("closeOnEscape",v),n.$$.dirty&32&&h("closeOnOutsideClick",c),n.$$.dirty&64&&h("portal",l),n.$$.dirty&256&&h("openFocus",w),n.$$.dirty&512&&h("closeFocus",O),n.$$.dirty&1024&&h("onOutsideClick",y)},[r,S,b,a,v,c,l,g,w,O,y,u,i]}class Vn extends Ye{constructor(e){super(),Ze(this,e,kn,Fn,Ge,{preventScroll:3,closeOnEscape:4,closeOnOutsideClick:5,portal:6,open:2,onOpenChange:7,openFocus:8,closeFocus:9,onOutsideClick:10})}}const Sn=n=>({builder:n&4}),Ue=n=>({builder:n[2]}),Cn=n=>({builder:n&4}),Ve=n=>({builder:n[2]});function Pn(n){let e,t,r,i;const u=n[8].default,a=he(u,n,n[7],Ue);let v=[n[2],{type:"button"},n[5]],c={};for(let l=0;l<v.length;l+=1)c=be(c,v[l]);return{c(){e=dt("button"),a&&a.c(),this.h()},l(l){e=ft(l,"BUTTON",{type:!0});var b=vt(e);a&&a.l(b),b.forEach(ve),this.h()},h(){Fe(e,c)},m(l,b){Xe(l,e,b),a&&a.m(e,null),e.autofocus&&e.focus(),n[9](e),t=!0,r||(i=[bt(n[2].action(e)),ke(e,"m-click",n[4]),ke(e,"m-keydown",n[4])],r=!0)},p(l,b){a&&a.p&&(!t||b&132)&&me(a,u,l,l[7],t?we(u,l[7],b,Sn):ye(l[7]),Ue),Fe(e,c=mt(v,[b&4&&l[2],{type:"button"},b&32&&l[5]]))},i(l){t||(z(a,l),t=!0)},o(l){H(a,l),t=!1},d(l){l&&ve(e),a&&a.d(l),n[9](null),r=!1,pt(i)}}}function Dn(n){let e;const t=n[8].default,r=he(t,n,n[7],Ve);return{c(){r&&r.c()},l(i){r&&r.l(i)},m(i,u){r&&r.m(i,u),e=!0},p(i,u){r&&r.p&&(!e||u&132)&&me(r,t,i,i[7],e?we(t,i[7],u,Cn):ye(i[7]),Ve)},i(i){e||(z(r,i),e=!0)},o(i){H(r,i),e=!1},d(i){r&&r.d(i)}}}function _n(n){let e,t,r,i;const u=[Dn,Pn],a=[];function v(c,l){return c[1]?0:1}return e=v(n),t=a[e]=u[e](n),{c(){t.c(),r=Oe()},l(c){t.l(c),r=Oe()},m(c,l){a[e].m(c,l),Xe(c,r,l),i=!0},p(c,[l]){let b=e;e=v(c),e===b?a[e].p(c,l):(gt(),H(a[b],1,1,()=>{a[b]=null}),ht(),t=a[e],t?t.p(c,l):(t=a[e]=u[e](c),t.c()),z(t,1),t.m(r.parentNode,r))},i(c){i||(z(t),i=!0)},o(c){H(t),i=!1},d(c){c&&ve(r),a[e].d(c)}}}function An(n,e,t){let r;const i=["asChild","el"];let u=Ne(e,i),a,{$$slots:v={},$$scope:c}=e,{asChild:l=!1}=e,{el:b=void 0}=e;const{elements:{trigger:g},getAttrs:w}=On();We(n,g,h=>t(6,a=h));const O=It(),y=w("trigger");function T(h){lt[h?"unshift":"push"](()=>{b=h,t(0,b)})}return n.$$set=h=>{e=be(be({},e),ct(h)),t(5,u=Ne(e,i)),"asChild"in h&&t(1,l=h.asChild),"el"in h&&t(0,b=h.el),"$$scope"in h&&t(7,c=h.$$scope)},n.$$.update=()=>{n.$$.dirty&64&&t(2,r=a),n.$$.dirty&4&&Object.assign(r,y)},[b,l,r,g,O,u,a,c,v,T]}class qn extends Ye{constructor(e){super(),Ze(this,e,An,_n,Ge,{asChild:1,el:0})}}export{Vn as D,qn as a,pn as c,On as g,Ae as h,Ut as r,He as s,gn as u};
